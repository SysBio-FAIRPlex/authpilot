# GCP Cloud Run Environment Configuration Template
# This file contains environment variables for GCP Cloud Run deployment

# =============================================================================
# FAIRPLEX CLIENT CONFIGURATION
# =============================================================================
MY_PORT=8080
MY_HOST=https://fairplex-client-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app

# =============================================================================
# HYDRA OAUTH2/OIDC SERVER CONFIGURATION
# =============================================================================
# Private URL: Used for internal service-to-service communication (Cloud Run internal)
HYDRA_PRIVATE_URL=https://hydra-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app
# Public URL: Used for user-facing redirects and browser requests
HYDRA_PUBLIC_URL=https://hydra-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app
# Admin URL: Used for administrative operations (should be internal/private)
HYDRA_ADMIN_URL=https://hydra-admin-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app
HYDRA_CLIENT_ID=${HYDRA_CLIENT_ID}
HYDRA_CLIENT_SECRET=${HYDRA_CLIENT_SECRET}

# =============================================================================
# KRATOS IDENTITY MANAGEMENT CONFIGURATION
# =============================================================================
KRATOS_PRIVATE_URL=https://kratos-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app
KRATOS_PUBLIC_URL=https://kratos-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app
KRATOS_ADMIN_URL=https://kratos-admin-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app

# =============================================================================
# OAUTH CALLBACK CONFIGURATION
# =============================================================================
OAUTH_CALLBACK=https://fairplex-client-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app/callback

# =============================================================================
# INTERNAL SERVICE URLs (Cloud Run Internal)
# =============================================================================
AUTH_PILOT_TOKEN_EXCHANGE_PRIVATE_URL=https://token-exchange-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app
AUTH_PILOT_TOKEN_EXCHANGE_URL=https://token-exchange-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app/token-exchange

AMP_PD_DRS_PRIVATE_URI=https://amp-pd-visa-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app
AMP_PD_DRS_URI=https://amp-pd-visa-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app/drs/v1/objects/auth-pilot-test-data/test-data.txt

AUTH_PILOT_DATA_TRANSFER_PRIVATE_URL=https://data-transfer-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app
AUTH_PILOT_DATA_TRANSFER_URL=https://data-transfer-${CLOUD_RUN_REGION}-${GCP_PROJECT_ID}.a.run.app/transfer

# =============================================================================
# EXTERNAL/PUBLIC URLs
# =============================================================================
AMP_PD_DESTINATION_URI=gs://${GCP_PROJECT_ID}-auth-pilot-data/download

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
CSRF_COOKIE_NAME=__Host-ax-x-csrf-token
CSRF_COOKIE_SECRET=${CSRF_COOKIE_SECRET}
COOKIE_SECRET=${COOKIE_SECRET}

# =============================================================================
# DATABASE CONFIGURATION (Cloud SQL)
# =============================================================================
DATABASE_URL=postgres://${DB_USER}:${DB_PASSWORD}@/${DB_NAME}?host=/cloudsql/${GCP_PROJECT_ID}:${CLOUD_SQL_REGION}:${CLOUD_SQL_INSTANCE_NAME}
KRATOS_DATABASE_URL=postgres://${KRATOS_DB_USER}:${KRATOS_DB_PASSWORD}@/${KRATOS_DB_NAME}?host=/cloudsql/${GCP_PROJECT_ID}:${CLOUD_SQL_REGION}:${CLOUD_SQL_INSTANCE_NAME}

# =============================================================================
# GCP SPECIFIC CONFIGURATION
# =============================================================================
GOOGLE_APPLICATION_CREDENTIALS=/etc/secrets/service-account-key.json
GCP_PROJECT_ID=${GCP_PROJECT_ID}
CLOUD_RUN_REGION=${CLOUD_RUN_REGION}

# =============================================================================
# LOGGING AND DEBUG
# =============================================================================
NODE_ENV=production
LOG_LEVEL=info 